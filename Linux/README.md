# Linux
- [Linux](#linux)
  - [1.开关机](#1开关机)
  - [2.目录结构](#2目录结构)
  - [3.基本命令](#3基本命令)
    - [3.1目录管理](#31目录管理)
    - [3.2文件属性](#32文件属性)
    - [3.3文件内容查看](#33文件内容查看)
    - [3.4硬链接和软链接](#34硬链接和软链接)
    - [3.5vim编辑器](#35vim编辑器)
    - [3.6账号管理](#36账号管理)
    - [3.7用户组管理](#37用户组管理)
    - [3.8磁盘管理](#38磁盘管理)
    - [3.9进程管理](#39进程管理)
## 1.开关机
开机会启动很多程序，win中叫做服务，Linux中叫做守护进程

登陆三种方式： 命令行 图形界面 ssh远程

关机：
```
sync # 同步数据到硬盘
shutdown # 关机
reboot # 重启
```

## 2.目录结构
```
/bin 存放二进制可执行文件(ls,cat,mkdir等)，常用命令一般都在这里

/boot 存放用于系统引导时使用的各种文件

/dev 用于存放设备文件

/etc 存放系统管理和配置文件

/home 存放所有用户文件的根目录，是用户主目录的基点

/lib 存放文件系统中程序运行所需要的共享库及内核模块 共享库又叫动态链接共享库

/lost+found 这个目录平时是空的，保存系统非正常关机而留下“无家可归”的文件

/media 系统自动识别设备 挂载在这里

/mnt 临时挂载其他文件系统

/opt 主机额外安装软件的地方

/proc 虚拟目录 系统内存映射

/root 管理员目录

/run 临时文件夹 存放系统启动以来的信息

/sbin 管理员二进制可执行命令文件

/sys Linux2.6内核的文件系统sysfs

/tmp 临时文件夹 

/usr 用户的应用程序目录

    /usr/bin 系统用户的应用程序

    /usr/sbin 超级用户的管理程序和系统守护程序

    /usr/src 内核源码

/var 存放运行时要不断修改的数据，一般存放经常被修改的目录和各种日志文件
```

## 3.基本命令
### 3.1目录管理
常见命令
```
ls: 列出目录
    [-a]：查看全部文件包括隐藏的
    [-l]：详细信息，属性和权限等
    [-i]：显示索引结点信息

cd：切换目录

pwd：显示目前的目录 print working directory
    [-P]：大写 显示真实路径 而非link路径

mkdir：创建一个空的目录
    [-m]：配置目录权限
    [-p]：创建多层空目录

rmdir：删除一个空的目录
    [-p]：删除多层空目录

cp: 复制文件或目录
    [-a]：递归复制目录下所有子目录和文件[-r]，并且复制其属性[-p]，若是link文件会则复制连接文档的属性而不是被连接的文件本身[-d]
    [-l]：硬连接复制
    [-s]：软连接复制
    [-i]：覆盖时询问
    [-f]：强制覆盖
    [-u]：源文件有更新则升级目标文件

rm: 移除文件或目录
    [-f]：强制移除
    [-i]：移除时询问
    [-r]：递归

mv: 移动文件与目录，或修改文件与目录的名称
    [-i]：移动时如果已经存在则询问
    [-f]：强制移动，有则覆盖
    [-u]：源文件有更新则升级目标文件
```

### 3.2文件属性
ls -ls查看文件属性，如home的属性

drwxr-xr-x

第一个字符代表这个文件是目录、文件或链接文件等等
```
d 目录
- 文件
l 链接文档
b 可随机存取的设备
c 一次性存取设备 键盘鼠标等
```
接下来的字符中，以三个为一组，且均为『rwx』 的三个参数的组合

第1-3位确定属主（该文件的所有者）拥有该文件的权限

第4-6位确定属组（所有者的同组用户）拥有该文件的权限

7-9位确定其他用户拥有该文件的权限
```
r 可读
w 可写
x 可执行
- 没有相对应权限
```
修改文件属性命令
```
chgrp 属组 目录/文件  # change group 更改目录/文件的属组

chown 属主 目录/文件 
      属主：数组 目录/文件 # change owner 更改目录/文件的属主 也可以同时更改属组

chmod own|group|other分别的权限 目录/文件  # 更改目录/文件的权限 一般用数字 r=4,w=2,x=1,则rwx=7

[-R] 可以递归更改
```
### 3.3文件内容查看
```
cat file  # 从第一行开始显示
    [-b]：显示列，空白行不算
    [-n]：显示列，空白行也算

tac file  # 从最后一行开始显示

more file  # 一页一页的显示文件
    空白：翻页
    回车：下一行
    q：退出
    b：前翻页
    :f：显示文件名和当前行号
    /字串：向下搜索字串

less file  # 一页一页的显示文件
    空白键：翻页
    上下键：翻行
    q：退出
    /字串：向下搜索
    ?字串：向上搜索

head file  # 只看前几行
tail file  # 只看后几行
    [-n]：设置看几行，默认10
```

### 3.4硬链接和软链接
硬链接：不同路径指向同一段磁盘存储空间，A是B的硬链接，表示A路径指向的磁盘空间就是B指向的磁盘空间，文件真正删除的条件是与之相关的所有硬连接文件均被删除。

软链接：类似快捷方式，A是B的软链接，表示A指向的磁盘空间保存的是B的路径。

```
ln f1 f2  # 创建f1文件的硬链接f2
ln -s f1 f2  # 创建f1文件的软链接f2
```

### 3.5vim编辑器
```
命令模式: 
    [移动光标]
    上下左右 移动光标
    page_up/down 上下翻页
    G 移动到最后一行  1G表示移动到第1行
    home 光标移动到当前行首
    end 光标移动到当前行末

    [搜索]
    /字串 向下搜索
    ？字串 向上搜索
    n 搜索后向下搜索下一个
    N 搜索后向上搜索下一个

    [删除 复制 粘贴]
    x 删除光标所在字符  10x 删除后10个字符
    dd 删除整行  10dd删除包括当前行向下10行
    yy 复制行  10yy复制包括当前行向下10行
    p 复制在下一行  
    u 上一步
    ctrl+r 下一步
    
    
输入模式：
    i 光标所在处开始编辑
    方向键 控制光标上下左右
    page_up/down 上下翻页
    home 光标移动到当前行首
    end 光标移动到当前行末

底线命令模式：
    :  进入底线命令模式
    w  保存
    w! 强制保存只读文件 但是要有写权限
    q  退出
    q! 不保存强制退出
    wq 存储后离开
```

### 3.6账号管理
```
useradd 选项 用户名
    [-m] 创建目录
    [-g] 指定用户组
    
userdel 选项 用户名
    [-r] 删除用户和目录

usermod 选项 用户名
    [-d] 修改主目录
    [-s] 修改shell
    [-g] 修改用户组

su username  # switch user 切换用户，$表示普通用户，#表示超级用户，也就是root用户
```
用户账号刚创建时没有口令，被系统锁定，无法使用，必须为其指定口令后才可以使用。
```
passwd [] username  # 修改用户的口令
    [-l] 锁定口令 即禁用账号
    [-u] 解锁口令
```
### 3.7用户组管理
```
groupadd [] groupname # 新增用户组
    [-g] 指定用户组标识号 默认是已有最大组号加1

groupdel groupname # 删除组

groupmode [] groupname # 修改组
    [-g] 修改组标识号
    [-n] 修改组名

groupnew groupname # 切换组：一个用户可能属于多个组
```
用户组管理的本质是修改文件/etc/passwd, /etc/shadow, /etc/group等

### 3.8磁盘管理
```
df -h # 查看整个文件系统的磁盘占用情况
du -h # 列出当前目录下的所有文件夹的大小
```
根文件系统之外的其他文件要想能够被访问，都必须通过“关联”至根文件系统上的某个目录来实现，此关联操作即为“挂载”，此目录即为“挂载点”,解除此关联关系的过程称之为“卸载”
```
mount /dev/cd /mnt/cd # 将 /dev/cd 挂载到 /mnt/cd 上面
umount [-f] /dev/cd # 卸载/dev/cd  -f 强制卸载
```

### 3.9进程管理
Linux中每一个程序都有一个自己的进程，每个进程都有一个进程号PID，也都有父进程

一般进程可以有两种存在方式：前台运行和后台运行。

基本的程序是前台运行，服务是后台运行。
```
ps -aux  # 查看所有进程
ps -aux|grep xx # | 是管道符，可以将前一个的输出作为后一个的输入 grep是查找文件中符合个条件的字符

pstree -pu # 显示进程树 

kill -9 PID  # 强制结束进程
```